{"version":3,"file":"page-2.js","sources":["../src/js/search-form.js"],"sourcesContent":["// Opisany w dokumentacji\nimport iziToast from \"izitoast\";\n// Opcjonalny import stylów\nimport \"izitoast/dist/css/iziToast.min.css\";\n\n// Opisany w dokumentacji\nimport SimpleLightbox from \"simplelightbox\";\n// Opcjonalny import stylów\nimport \"simplelightbox/dist/simple-lightbox.min.css\";\n\nconst loader = document.querySelector('.loader');\nconst gallery = document.querySelector('.gallery');\n\n//zmienna lightbox\nlet lightbox;\n\n//wyszukanie przycisku przez ID i dodanie zdarzenia na kliknięciu\ndocument.getElementById('searchButton').addEventListener('click', function(event) {\n    event.preventDefault();\n\n    //wartość inputa\n    const keyWord = document.getElementById('searchInput').value;\n\n    //ustawienie loadera na widoczny przed wysłaniem żądania\n    loader.style.display = 'block';\n    \n    const searchParams = new URLSearchParams ({\n        key: \"46327041-9a6335f12388e2a1236167102\",\n        q: keyWord,\n        image_type: \"photo\",\n        orientation: \"horizontal\",\n        safesearch: true,\n    });\n    \n    console.log(searchParams.toString());\n    const url = `https://pixabay.com/api/?${searchParams}`;\n\n    console.log(url);\n\n    \n    fetch(url)\n        .then((response) => {\n            if (!response.ok) {\n                throw new Error(response.error);\n            }\n            return response.json()\n        })\n        .then((data) => {\n            gallery.innerHTML = '';\n\n            if (Array.isArray(data.hits) && data.hits.length === 0) {\n                // Jeśli otrzymano pustą tablicę\n\n                iziToast.error({\n                    title: false,\n                    message: 'Sorry, there are no images matching your search query. Please try again!',\n                    position: 'topRight'\n                });\n            } else {\n                const markup = data.hits.map((image) => {\n                    return `\n                    <div class= \"card\">\n                    <a href=\"${image.largeImageURL}\" class=\"lightbox\" title=\"${image.tags}\">\n                    <img src=\"${image.webformatURL}\" alt=\"${image.tags}\"></img>\n                    </a>\n                    <div class=\"container-box\">\n                    <p class=\"desc\"><span class=\"count\">Likes:</span> ${image.likes}</p>\n                    <p class=\"desc\"><span class=\"count\">Views:</span> ${image.views}</p>\n                    <p class=\"desc\"><span class=\"count\">Comments:</span> ${image.comments}</p>\n                    <p class=\"desc\"><span class=\"count\">Downloads:</span> ${image.downloads}</p>\n                    </div>\n                    </div>\n                    `;\n                })\n                .join(\"\");\n\n                gallery.innerHTML = markup;\n\n                lightbox = new SimpleLightbox('.gallery a', {\n                    captionsData: \"alt\",\n                    sourceAttr: \"href\",\n                    captions: true,\n                    captionDelay: 250\n                });\n\n                //odświeżnie, gdy np. dodamy nowy element\n                lightbox.refresh();\n\n            }\n        })\n        .catch((error) => {\n            console.log('There has been a problem with your fetch operation:', error);\n        })\n\n        //loader niewidoczny po tym jak żądanie zostało przetworzone\n        .finally(() => {\n            loader.style.display = 'none';\n        })\n});\n\n//zamykanie okna modalnego za pomocą klawiszy\ndocument.addEventListener(\"keydown\", e => {\n    if(e.key === \"Escape\" && instance.visible()) {\n        instance.close();\n    }\n})"],"names":["loader","gallery","lightbox","event","keyWord","searchParams","url","response","data","iziToast","markup","image","SimpleLightbox","error","e"],"mappings":"+IAUA,MAAMA,EAAS,SAAS,cAAc,SAAS,EACzCC,EAAU,SAAS,cAAc,UAAU,EAGjD,IAAIC,EAGJ,SAAS,eAAe,cAAc,EAAE,iBAAiB,QAAS,SAASC,EAAO,CAC9EA,EAAM,eAAc,EAGpB,MAAMC,EAAU,SAAS,eAAe,aAAa,EAAE,MAGvDJ,EAAO,MAAM,QAAU,QAEvB,MAAMK,EAAe,IAAI,gBAAiB,CACtC,IAAK,qCACL,EAAGD,EACH,WAAY,QACZ,YAAa,aACb,WAAY,EACpB,CAAK,EAED,QAAQ,IAAIC,EAAa,SAAU,CAAA,EACnC,MAAMC,EAAM,4BAA4BD,CAAY,GAEpD,QAAQ,IAAIC,CAAG,EAGf,MAAMA,CAAG,EACJ,KAAMC,GAAa,CAChB,GAAI,CAACA,EAAS,GACV,MAAM,IAAI,MAAMA,EAAS,KAAK,EAElC,OAAOA,EAAS,KAAM,CAClC,CAAS,EACA,KAAMC,GAAS,CAGZ,GAFAP,EAAQ,UAAY,GAEhB,MAAM,QAAQO,EAAK,IAAI,GAAKA,EAAK,KAAK,SAAW,EAGjDC,EAAS,MAAM,CACX,MAAO,GACP,QAAS,2EACT,SAAU,UAC9B,CAAiB,MACE,CACH,MAAMC,EAASF,EAAK,KAAK,IAAKG,GACnB;AAAA;AAAA,+BAEIA,EAAM,aAAa,6BAA6BA,EAAM,IAAI;AAAA,gCACzDA,EAAM,YAAY,UAAUA,EAAM,IAAI;AAAA;AAAA;AAAA,wEAGEA,EAAM,KAAK;AAAA,wEACXA,EAAM,KAAK;AAAA,2EACRA,EAAM,QAAQ;AAAA,4EACbA,EAAM,SAAS;AAAA;AAAA;AAAA,qBAI1E,EACA,KAAK,EAAE,EAERV,EAAQ,UAAYS,EAEpBR,EAAW,IAAIU,EAAe,aAAc,CACxC,aAAc,MACd,WAAY,OACZ,SAAU,GACV,aAAc,GAClC,CAAiB,EAGDV,EAAS,QAAO,CAEnB,CACb,CAAS,EACA,MAAOW,GAAU,CACd,QAAQ,IAAI,sDAAuDA,CAAK,CACpF,CAAS,EAGA,QAAQ,IAAM,CACXb,EAAO,MAAM,QAAU,MACnC,CAAS,CACT,CAAC,EAGD,SAAS,iBAAiB,UAAWc,GAAK,CACnCA,EAAE,MAAQ,UAAY,SAAS,QAAO,GACrC,SAAS,MAAK,CAEtB,CAAC"}
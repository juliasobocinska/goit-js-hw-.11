{"version":3,"file":"page-2.js","sources":["../src/js/search-form.js"],"sourcesContent":["// Opisany w dokumentacji\r\nimport iziToast from \"izitoast\";\r\n// Opcjonalny import stylów\r\nimport \"izitoast/dist/css/iziToast.min.css\";\r\n\r\n// Opisany w dokumentacji\r\nimport SimpleLightbox from \"simplelightbox\";\r\n// Opcjonalny import stylów\r\nimport \"simplelightbox/dist/simple-lightbox.min.css\";\r\n\r\nconst loader = document.querySelector('.loader');\r\nconst gallery = document.querySelector('.gallery');\r\nlet lightbox;\r\n\r\ndocument.getElementById('searchButton').addEventListener('click', function(event) {\r\n    event.preventDefault();\r\n    const keyWord = document.getElementById('searchInput').value;\r\n\r\n    loader.style.display = 'block';\r\n    \r\n    const searchParams = new URLSearchParams ({\r\n        key: \"46327041-9a6335f12388e2a1236167102\",\r\n        q: keyWord,\r\n        image_type: \"photo\",\r\n        orientation: \"horizontal\",\r\n        safesearch: true,\r\n    });\r\n    \r\n    console.log(searchParams.toString());\r\n    const url = `https://pixabay.com/api/?${searchParams}`;\r\n\r\n    console.log(url);\r\n\r\n    fetch(url)\r\n        .then((response) => {\r\n            if (!response.ok) {\r\n                throw new Error(response.error);\r\n            }\r\n            return response.json()\r\n        })\r\n        .then((data) => {\r\n            gallery.innerHTML = '';\r\n\r\n            if (Array.isArray(data.hits) && data.hits.length === 0) {\r\n                // Jeśli otrzymano pustą tablicę\r\n                iziToast.error({\r\n                    title: false,\r\n                    message: 'Sorry, there are no images matching your search query. Please try again!',\r\n                    position: 'topRight'\r\n                });\r\n            } else {\r\n                const markup = data.hits.map((image) => {\r\n                    return `\r\n                    <div class= \"card\">\r\n                    <a href=\"${image.largeImageURL}\" class=\"lightbox\" title=\"${image.tags}\">\r\n                    <img src=\"${image.webformatURL}\" alt=\"${image.tags}\"></img>\r\n                    </a>\r\n                    <p>Likes: ${image.likes}</p>\r\n                    <p>Views: ${image.views}</p>\r\n                    <p>Comments: ${image.comments}</p>\r\n                    <p>Downloads: ${image.downloads}</p>\r\n                    </div>\r\n                    `;\r\n                })\r\n                .join(\"\");\r\n\r\n                gallery.innerHTML = markup;\r\n\r\n                lightbox = new SimpleLightbox('.gallery a', {\r\n                    captionsData: \"alt\",\r\n                    sourceAttr: \"href\",\r\n                    captions: true,\r\n                    captionDelay: 250\r\n                });\r\n\r\n                lightbox.refresh();\r\n\r\n            }\r\n        })\r\n        .catch((error) => {\r\n            console.error('There has been a problem with your fetch operation:', error);\r\n        })\r\n        .finally(() => {\r\n            loader.style.display = 'none';\r\n        })\r\n});\r\n\r\ndocument.addEventListener(\"keydown\", e => {\r\n    if(e.key === \"Escape\" && instance.visible()) {\r\n        instance.close();\r\n    }\r\n})"],"names":["loader","gallery","lightbox","event","keyWord","searchParams","url","response","data","iziToast","markup","image","SimpleLightbox","error","e"],"mappings":"+IAUA,MAAMA,EAAS,SAAS,cAAc,SAAS,EACzCC,EAAU,SAAS,cAAc,UAAU,EACjD,IAAIC,EAEJ,SAAS,eAAe,cAAc,EAAE,iBAAiB,QAAS,SAASC,EAAO,CAC9EA,EAAM,eAAc,EACpB,MAAMC,EAAU,SAAS,eAAe,aAAa,EAAE,MAEvDJ,EAAO,MAAM,QAAU,QAEvB,MAAMK,EAAe,IAAI,gBAAiB,CACtC,IAAK,qCACL,EAAGD,EACH,WAAY,QACZ,YAAa,aACb,WAAY,EACpB,CAAK,EAED,QAAQ,IAAIC,EAAa,SAAU,CAAA,EACnC,MAAMC,EAAM,4BAA4BD,CAAY,GAEpD,QAAQ,IAAIC,CAAG,EAEf,MAAMA,CAAG,EACJ,KAAMC,GAAa,CAChB,GAAI,CAACA,EAAS,GACV,MAAM,IAAI,MAAMA,EAAS,KAAK,EAElC,OAAOA,EAAS,KAAM,CAClC,CAAS,EACA,KAAMC,GAAS,CAGZ,GAFAP,EAAQ,UAAY,GAEhB,MAAM,QAAQO,EAAK,IAAI,GAAKA,EAAK,KAAK,SAAW,EAEjDC,EAAS,MAAM,CACX,MAAO,GACP,QAAS,2EACT,SAAU,UAC9B,CAAiB,MACE,CACH,MAAMC,EAASF,EAAK,KAAK,IAAKG,GACnB;AAAA;AAAA,+BAEIA,EAAM,aAAa,6BAA6BA,EAAM,IAAI;AAAA,gCACzDA,EAAM,YAAY,UAAUA,EAAM,IAAI;AAAA;AAAA,gCAEtCA,EAAM,KAAK;AAAA,gCACXA,EAAM,KAAK;AAAA,mCACRA,EAAM,QAAQ;AAAA,oCACbA,EAAM,SAAS;AAAA;AAAA,qBAGlC,EACA,KAAK,EAAE,EAERV,EAAQ,UAAYS,EAEpBR,EAAW,IAAIU,EAAe,aAAc,CACxC,aAAc,MACd,WAAY,OACZ,SAAU,GACV,aAAc,GAClC,CAAiB,EAEDV,EAAS,QAAO,CAEnB,CACb,CAAS,EACA,MAAOW,GAAU,CACd,QAAQ,MAAM,sDAAuDA,CAAK,CACtF,CAAS,EACA,QAAQ,IAAM,CACXb,EAAO,MAAM,QAAU,MACnC,CAAS,CACT,CAAC,EAED,SAAS,iBAAiB,UAAWc,GAAK,CACnCA,EAAE,MAAQ,UAAY,SAAS,QAAO,GACrC,SAAS,MAAK,CAEtB,CAAC"}